# Решение проблемы: Git pull конфликт и ImportError

## Проблема

1. Git pull не прошел из-за локальных изменений в скриптах (`start_all.sh`, `start_bot.sh`, `stop_all.sh`)
2. Бот не работает из-за ошибки ImportError (запускается старая версия кода)

## Решение

### Шаг 1: Сохраните локальные изменения (если они важны)

```bash
# Посмотрите, какие изменения есть
git status

# Сохраните изменения временно
git stash

# Или удалите локальные скрипты (если изменения не важны)
rm start_all.sh start_bot.sh stop_all.sh
```

### Шаг 2: Обновите код из репозитория

```bash
git pull
```

### Шаг 3: Если использовали stash, проверьте конфликты

```bash
# Если stash был использован, можно попробовать применить изменения
git stash pop

# Если будут конфликты, разрешите их вручную или просто используйте версию из репозитория
git checkout --theirs start_all.sh start_bot.sh stop_all.sh
```

### Шаг 4: Выдайте права на выполнение скриптам

```bash
chmod +x *.sh
```

### Шаг 5: Перезапустите сервер и бота

```bash
./stop_all.sh
./start_all.sh
```

### Шаг 6: Проверьте логи

```bash
# Логи бота
tail -f bot.log

# Логи сервера
tail -f server.log
```

## Быстрое решение (если локальные изменения не важны)

```bash
# Удалите конфликтующие скрипты
rm start_all.sh start_bot.sh stop_all.sh

# Обновите код
git pull

# Выдайте права
chmod +x *.sh

# Перезапустите
./stop_all.sh
./start_all.sh

# Проверьте логи
tail -f bot.log
```

## Проверка работы

После перезапуска:
1. Отправьте команду `/start` боту в Telegram
2. Проверьте логи на наличие ошибок
3. Убедитесь, что в `.env` файле правильно указан `SERVER_URL`:
   ```bash
   cat .env | grep SERVER_URL
   ```
   Должно быть: `SERVER_URL=http://80.87.105.61:8001` (или `http://127.0.0.1:8001`)
